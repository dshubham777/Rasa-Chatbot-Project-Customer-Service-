(this["webpackJsonprasa-frontend"]=this["webpackJsonprasa-frontend"]||[]).push([[4],{1599:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(0),l=a(20),s=a(218),c=a(13),i=a(1),o=a(23),m=a(3),u=a(28);function d(e){var t=e.children;return r.createElement(u.a,{content:t,ml:1},r.createElement(m.c,{icon:"info-circle",style:{fontSize:18}}))}var E=a(8),f=a(70),b=a.n(f),v=(a(1512),a(1597)),h=a(24),g={PT1H:"h a",P1D:"DD/MM",P1M:"MMM"},x={PT1H:" [at] h a",P1D:" [on] MMMM Do",P1M:" [in] MMMM"},y=function(e){return b.a.duration(e).format("h [hours] m [minutes] s [seconds]",{trim:"both"})},k=E.default.div.withConfig({displayName:"SimpleLineChart__ValueOnlyTooltip",componentId:"seom60-0"})(["padding:6px 8px;background-color:white;border-radius:0.3em;border:1px solid rgb(204,204,204);"]);function p(e){var t=e.data,a=e.title,n=e.isTime,l=e.isAdvanced,s=e.bucket,c=void 0===s?"P1D":s;if(!t)return null;var o,u=0===(o=t).length?0:o.reduce((function(e,t){return e+t.value}),0)/o.length,E=n?y:function(e){return Math.round(e).toLocaleString()};return r.createElement(m.b,null,r.createElement(h.a,{variant:4},a),r.createElement(i.Flex,null,r.createElement(m.f,null,E(u)),r.createElement(d,null,"Average ",a.replace(/^[Aa]verage /,"").toLowerCase()," in the specified time range.")),r.createElement(v.d,{width:"100%",height:150},r.createElement(v.b,{data:t},l&&[r.createElement(v.c,{key:"grid",vertical:!1}),r.createElement(v.g,{key:"y-axis",minTickGap:0,allowDecimals:!1,tickLine:!1}),r.createElement(v.f,{key:"x-axis",dataKey:"timestamp",allowDecimals:!1,minTickGap:10,tickLine:!1,tickFormatter:function(e){return b.a.unix(e).format(g[c])}})],r.createElement(v.e,{cursor:!1,isAnimationActive:!1,content:function(e){var t=e.active,a=e.payload;if(!t)return null;var n=a&&a[0].payload;return n?r.createElement(k,null,E(n.value),b.a.unix(n.timestamp).format(x[c])):null}}),r.createElement(v.a,{type:"linear",dataKey:"value",stroke:"#3d44bc",fill:"#3d44bc",fillOpacity:.3,strokeWidth:2,dot:!1}))))}var M=a(528),w=[{label:"last 24 hours",value:"PT1H",data:M.c.PT1H},{label:"last 30 days",value:"P1D",data:M.c.P1D},{label:"last 12 months",value:"P1M",data:M.c.P1M}];function A(e){var t=e.value,a=e.onChange,n=r.useCallback((function(e){return e&&!Array.isArray(e)&&a(e)}),[a]);return r.createElement(m.e,{value:w.find((function(e){return e.value===t})),options:w,onChange:n})}var F=a(100);function S(e){var t=e.onFetchAnalytics,a=e.analytics,n=e.bucket,l=e.conversationsStatistics,s=Object(o.g)();return r.useEffect((function(){s("view:analytics:loaded")}),[s]),null===a||null===l?null:r.createElement(F.a,{title:"Analytics",scrollable:!0,rightContent:r.createElement(i.Box,{mr:3,width:.5,style:{display:"inline-block"}},r.createElement(A,{value:n,onChange:function(e){return t({bucket:e.value,start:e.data.start,end:e.data.end})}}))},r.createElement(i.Flex,{flexDirection:"column"},r.createElement(h.a,{variant:3,mb:3},"Sessions"),r.createElement(i.Flex,{mb:4,flex:"1 0 auto"},r.createElement(i.Box,{mr:3,width:1/3},r.createElement(p,{data:a.conversation_length,bucket:n,title:"Average Session Length",isTime:!0})),r.createElement(i.Box,{mx:3,width:1/3},r.createElement(p,{data:a.conversation_steps,bucket:n,title:"Average Number of Messages per Session"})),r.createElement(i.Box,{ml:3,width:1/3},r.createElement(p,{data:a.sessions_per_user,bucket:n,title:"Average Number of Sessions per User"}))),r.createElement(h.a,{variant:3,mb:3},"Users"),r.createElement(i.Flex,{mb:4,flex:"1 0 auto"},r.createElement(i.Box,{mr:3,width:2/3},r.createElement(p,{data:a.conversations,bucket:n,title:"Number of Active Users",isAdvanced:!0})),r.createElement(i.Box,{mx:3,width:1/3},r.createElement(p,{data:a.new_users,bucket:n,title:"Number of New Users"}))),r.createElement(h.a,{variant:3,mb:3},"Messages"),r.createElement(i.Flex,{mb:4,flex:"1 0 auto"},r.createElement(i.Box,{mr:3,width:2/7},r.createElement(p,{data:a.user_messages,bucket:n,title:"Number of User Messages"})),r.createElement(i.Box,{mx:3,width:2/7},r.createElement(p,{data:a.bot_messages,bucket:n,title:"Number of Bot Messages"})),r.createElement(i.Box,{mx:3,width:2/7},r.createElement(p,{data:a.total_messages,bucket:n,title:"Number of All Messages"})),r.createElement(i.Box,{ml:3,width:1/7},r.createElement(m.b,{sx:{height:"100%"}},r.createElement(i.Flex,{flexDirection:"column",style:{height:"100%"}},r.createElement(i.Box,{flex:"1"},r.createElement(i.Flex,null,r.createElement(h.a,{variant:4},"Overall user messages"),r.createElement(d,null,"Overall number of user messages.")),r.createElement(m.f,null,l.user_messages.toLocaleString())),r.createElement(i.Box,{flex:"1"},r.createElement(i.Flex,null,r.createElement(h.a,{variant:4},"Overall bot messages"),r.createElement(d,null,"Overall number of bot messages.")),r.createElement(m.f,null,l.bot_messages.toLocaleString()))))))))}var B={onFetchAnalytics:s.a.request,onFetchConversationsStatistics:c.r.request};t.default=Object(l.b)((function(e){return{analytics:e.analytics.metrics,start:e.analytics.start,end:e.analytics.end,bucket:e.analytics.bucket,conversationsStatistics:e.messages.conversationsStatistics,loading:e.analytics.loading}}),B)((function(e){var t=e.start,a=e.end,l=Object(n.a)(e,["start","end"]),s=l.bucket,c=l.onFetchAnalytics,i=l.onFetchConversationsStatistics;return r.useEffect((function(){c({bucket:s,start:t,end:a}),i()}),[s,t,a,c,i]),r.createElement(S,l)}))}}]);